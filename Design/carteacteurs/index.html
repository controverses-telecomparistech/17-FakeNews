<!DOCTYPE html>
<meta charset="utf-8">
<style>
text {
    fill: white;
    text-anchor: middle;
}
</style>
<svg class="carteacteurs"></svg>
<script src="https://d3js.org/d3.v4.js"></script>
<script>

var w=600,
    h=600;

var grpwidth = 100;
var grpheight = 100; // TODO: calculer la hauteur du groupe en fct de la taille de actors
var rowheight = 20;
var hspace=Math.floor((w-2*grpwidth)/3);
var vspace=Math.floor((w-2*grpheight)/3);

var data = [{"name":"Grp1", "actors":[{"name":"A"},{"name":"B"}]},
{"name":"Grp2", "actors":[{"name":"C"},{"name":"D"}]},
{"name":"Grp3", "actors":[{"name":"E"},{"name":"F"}]},
{"name":"Grp4", "actors":[{"name":"G"},{"name":"H"}]}];

var svg = d3.select(".carteacteurs")
    .attr("width",w)
    .attr("height",w);

svg.append("rect").attr("width",w).attr("height",h).attr("fill","lightgray");
var groups = svg.selectAll("g")
    .data(data)
    .enter().append("g")
    .attr("transform", function(d,i) {
        var x = hspace+((!(i%2)) ? 0 : grpwidth+hspace),
            y = vspace+Math.floor(i/2)*(vspace+grpheight);
        return "translate("+x+","+y+")";});

var headers = groups.append("g").attr("class","header");
headers.append("rect")
    .attr("width",grpwidth).attr("height",rowheight)
    .attr("fill","steelblue");

headers.append("text")
    .attr("x", grpwidth/2)
    .attr("dy","0.90em")
    .text(function(d) {return d.name});

var rows = groups.selectAll("g.row")
    .data(function(d) { return d.actors; })
    .enter().append("g")
    .attr("class","row")
    .attr("transform", function(d,i) {
        var y = (i+1)*rowheight;
        return "translate(0,"+y+")";})

rows.append("rect")
    .attr("width",grpwidth)
    .attr("height",rowheight)
    .attr("fill",function(d,i) { return (i%2) ? "steelblue":"lightsteelblue";})

rows.append("text")
    .attr("x",grpwidth/2)
    .attr("dy","0.90em")
    .attr("fill","white")
    .text(function(d) { return d.name;})
    
</script>
